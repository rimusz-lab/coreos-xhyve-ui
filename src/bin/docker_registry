#!/bin/bash
# docker registry for coreos-xhyve

# get App's Resources folder
res_folder=$(cat ~/coreos-xhyve-ui/.env/resouces_path)

start() {
    echo "Starting docker registry on 192.168.64.1:5000 ..."
    nohup "${res_folder}"/bin/registry "${res_folder}"/registry/config.yml >/dev/null 2>&1 &
}

stop() {
    kill $(ps aux | grep "[r]egistry" | awk {'print $2'}) >/dev/null 2>&1 &
}

usage() {
    echo "Usage: docker_registry start|stop"
}

case "$1" in
        start)
                start
                ;;
        stop)
                stop
                ;;
        *)
                usage
                ;;
esac

